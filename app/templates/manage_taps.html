{% extends "layout.html" %}
{% block body %}

<h2>Manage taps</h2>

<div class="row">
  <div class="col-xs-10 col-xs-offset-1">

    {% for tap in taps|sort(attribute='id') %}
    <div class="row tap">
      <div class="col-xs-2">
          <p>{{tap.label}}</p>
      </div>

    {% if tap.beer %}
      <div class="col-xs-6" id="border_tap{{tap.id}}">
        <h4>{{tap.beer.name}} ({{tap.beer.style}})</h4>
        <h4>{{tap.beer.brewery.name}}</h4>
        <h5>{{tap.beer.abv}}%</h5>
      </div>
      <div class="col-xs-4">
        <button type="button" name="clear_tap" class="btn btn-default" data-tap-id="{{tap.id}}">Clear tap</button>
      </div>
      {% else %}
      <div class="col-xs-6"></div>
      <div class="col-xs-4">
        <button type="button" name="tap_keg" class="btn btn-default" data-tap-id="{{tap.id}}">Tap a keg</button>
      </div>
      {% endif %}
    </div>

    <hr>

    {% endfor %}

  </div>
</div>
{% endblock %}
{% block endbody %}
<script type="text/javascript">
{% for tap in taps %}
  $("#border_tap{{tap.id}}").css("border-left","3px solid "+get_hex_from_ebc({{tap.beer.colour}}));
{% endfor %}

$("button[name='clear_tap']").on('click', function() {
  window.location.href = $SCRIPT_ROOT + "/tap/" + $(this).data("tap-id") + "/clear";
});
</script>
{% endblock %}
